
(defun get-file (filename)
    (with-open-file (stream filename)
        (loop for line = (read-line stream nil)
            while line collect line)))

(defun convert-room (filename) 
	(let ((output)) 
		(setq output (get-file filename))
		(loop for line in output 
			;;do (print (coerce (aref line 0) 'character)))))
			collect (concatenate 'list line))))

;;changes the room, from looking like
#| 
####################################
#.@................................#
#..................................|
#..................................|
##--################################
|# 

;; to lists of chars, ie
;; ((#\#) (#\@) (#\#))

(defun save-room-txt ()
  (with-open-file (outfile "room-bak.txt"
                     :direction :output
                     :if-exists :supersede
                     :if-does-not-exist :create)
	    (prin1 (convert-room "room.txt") outfile)))

#|
####################################                
#..................................#################
#..................................|...............#
#..................................|...............#
##--############################################???#
 #..#                                          ?????
 #..#                                               
 #..#                                               
 #..#                                               
 #..#                                               
 #..#                    ###########################
 #..#                    #.........................#
 #..#                    #.........................#
 #..#                    #######################--##
 #..#                                          #..# 
##--#######                                    #..# 
#.........#                      ###############--##
#.........#                      #.................#
#.........#                      #.................#
#.........#                      #.................#
#.........########################.................#
#.........|......................|.................#
#.........########################.................#
###########                      #.................#
                                 #.................#
                       ###########.................#
                       #.........|.................#
                       #.........|.................#
                       #.........###################
                       #....######                  
                       #....#                       
                       #....#                       
                       #....#                       
                       #....#                       
                       #....#                       
                       #....#                       
                       #....#                       
                       #....#                       
                       #----#                       
                       #....#                       
                ########....####                    
                #..............#                    
                #..............#                    
                #..............#                    
                #..............#?                   
                #..............|?                   
                #..............|?                   
                ################?                   
|#